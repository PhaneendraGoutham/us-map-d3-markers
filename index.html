<!DOCTYPE html>
<html>
<head>
<title>Demo: Mother Jones Bubble Mapper</title>
<!--[if lt IE 9]>
  <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<link href="style.css" rel="stylesheet" media="screen">
</head>
<body>
	
	<div id="bubble-mapper">
	<section id="hed">
		<h3>Did Your State Make it Harder or Easier to Have a Gun in 2013?</h3>
		<p>Total number of laws passed in tk tk</p>
	</section>
  <div id="sorts"></div>
  <div class="clear" style="clear:both"></div>

  <div id="container"></div>


  <script type="text/javascript" src="jquery-latest.js"></script>
  <script type="text/javascript" src="d3.v2.min.js"></script>
  <script type="text/javascript" src="tabletop.js"></script>
  <script type="text/javascript" src="premade_visualizations.js"></script>
  <script type="text/javascript" src="node_shape_types.js"></script>
  <script type="text/javascript" src="spreadsheet_to_d3.js"></script>
  <script type="text/javascript" src="center_of_path_element.js"></script>
  <script type="text/javascript" src="dust-full-1.2.3.min.js"></script>

  <script type="text/javascript">
    //URL to public google spreadsheet
    var public_spreadsheet_url = 'https://docs.google.com/spreadsheet/pub?key=0AswaDV9q95oZdHBBN0dvbkY5b2JPbzF0eG1XamIxTVE&output=html';

    var options = {
        //width of visualization
        w : 632,
        //height of visualization
        h : 400,
        //padding within visualization
        padding : 20,

        // this array says which visualizations we want
        //right now we only have map, force, and list
        desired_visualizations : [
            {
                'data' : 'sizehydro',
                'label' : 'Hydro Elecetrics',
                'visualizations' : [
                    'map',
                    'list',
                ],
                'scale_against' : 'sizetotal',
                'max_list_items' : 20,
                'tooltip_template':'\
                    <h3>{state}</h3> \
                    <span>(In billions of BTUs)</span> \
                    <p>Solar: {commassolar}</p> \
                    <p>Wind: {commaswind}</p> \
                    <p>Hydroelectric: {commashydro}</p> \
                    <p>Geothermal: {commasgeo}</p> \
                    <p>Total: {commastotal}</p> \
                ',
            },
            {
                'data' : 'sizesolar',
                'label' : 'solar powered',
                'visualizations' : [
                    'map',
                ],
                'scale_against' : 'sizetotal',
                'max_list_items' : 20,
                'tooltip_template':'\
                    <h3>{state}</h3> \
                    <span>(In billions of BTUs)</span> \
                    <p>Solar: {commassolar}</p> \
                    <p>Wind: {commaswind}</p> \
                    <p>Hydroelectric: {commashydro}</p> \
                    <p>Geothermal: {commasgeo}</p> \
                    <p>Total: {commastotal}</p> \
                ',
            },
        ],

        // don't fuck with me unless you want a map that isn't the contental US
        map_projection : d3.geo.albersUsa(),

        // this is the html element we put the buttons
        action_container_id : 'sorts',
        // this is the id of the html element we put the visualization
        vis_container_id : 'container',

    };

    //loading in the data using tabletop.js
    window.onload = function() {

            Tabletop.init( { 
                key: public_spreadsheet_url,
                callback: function(dataset) {
                    new SpreadsheetToD3(dataset, options);
                },
                simpleSheet: true 
            } )
    };


  </script>

	<p id="source">By Ben Breedlove and Tasneem Raja, Mother Jones. Source: Energy Information Administration.</p>

	</div>
  </body>
</html>
