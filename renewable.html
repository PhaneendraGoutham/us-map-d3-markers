<!DOCTYPE html>
<html>
<head>
<title>Demo: Mother Jones Bubble Mapper</title>
<!--[if lt IE 9]>
  <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<link href="style.css" rel="stylesheet" media="screen">
</head>
<body>
	
	<div id="bubble-mapper">
	<section id="hed">
		<h2>Which State Uses the Most Green Energy?</h2>
		<p>Energy consumption in BTUsâ€”the amount of energy needed to heat one pound of water by one degree Fahrenheit.</p>
	</section>
  <div id="sorts"></div>
  <div class="clear" style="clear:both"></div>

  <div id="container"></div>


  <script type="text/javascript" src="jquery-latest.js"></script>
  <script type="text/javascript" src="d3.v2.min.js"></script>
  <script type="text/javascript" src="tabletop.js"></script>
  <script type="text/javascript" src="premade_visualizations.js"></script>
  <script type="text/javascript" src="spreadsheet_to_d3.js"></script>
  <script type="text/javascript" src="center_of_path_element.js"></script>
  <script type="text/javascript" src="dust-full-1.2.3.min.js"></script>

  <script type="text/javascript">
    //URL to public google spreadsheet
    var public_spreadsheet_url = 'https://docs.google.com/spreadsheet/pub?key=0AswaDV9q95oZdHBBN0dvbkY5b2JPbzF0eG1XamIxTVE&output=html';

    var options = {
        //width of visualization
        w : 632,
        //height of visualization
        h : 400,
        //padding within visualization
        padding : 20,
        // for list view. how many items you want to show at once
        max_list_items : 20,

        // if your column doesn't start with this, it won't get a size button for it
        // this is a regular expression, ask for help if you don't know what that means
        size_type_signifier : /^size/,

        // this array says which visualizations we want
        //right now we only have map, force, and list
        desired_visualizations : [
            'map',
//            'force',
            'list',
        ],

        tooltip_template: '<h3>{state}</h3> \
			<span>(In billions of BTUs)</span> \
            <p>Solar: {commassolar}</p> \
            <p>Wind: {commaswind}</p> \
            <p>Hydroelectric: {commashydro}</p> \
            <p>Geothermal: {commasgeo}</p> \
            <p>Total: {commastotal}</p> \
        ',

        // don't fuck with me unless you want a map that isn't the contental US
        map_projection : d3.geo.albersUsa(),

        // this is the html element we put the buttons
        action_container_id : 'sorts',
        // this is the id of the html element we put the visualization
        vis_container_id : 'container',

    };

    //loading in the data using tabletop.js
    window.onload = function() {

            Tabletop.init( { 
                key: public_spreadsheet_url,
                callback: function(dataset) {
                    new SpreadsheetToD3(dataset, options);
                },
                simpleSheet: true 
            } )
    };


  </script>

	<p id="source">By Ben Breedlove and Tasneem Raja, Mother Jones. Source: Energy Information Administration.</p>

	</div>
  </body>
</html>
